name: post-trigger-workflow

on:
  pull_request:

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref_name }}-${{ github.ref_type == 'branch' && github.sha }}-${{ github.event_name == 'workflow_dispatch' }}
  cancel-in-progress: true

permissions: read-all

jobs:
  test:
    name: test dispatch
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Version Branch
        uses: actions/checkout@v3
      - name: test-post
        uses: ./.github/workflows/post-use-trigger-workflow.yml
        with:
          build-environment: linux
          secrets: inherit

      - name: Invoke workflow with inputs
        uses: benc-uk/workflow-dispatch@v1
        with:
          workflow: post_test_dispatch.yml
          inputs: '{ "name": "blah blah"}'
