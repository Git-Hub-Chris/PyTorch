name: post-use-trigger-workflow

on:
  workflow_call:
    inputs:
      build-environment:
        required: true
        type: string
        description: Top-level label for what's being built/tested.

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref_name }}-${{ github.ref_type == 'branch' && github.sha }}-${{ github.event_name == 'workflow_dispatch' }}
  cancel-in-progress: true

permissions: read-all

jobs:
  test-process:
    runs-on: ubuntu-latest
    steps:
      - name: Testing
        run: |
          echo "Workflow post-use-trigger-workflow: ${{ github.workflow }}"
  test-dispatch:
      - name: Invoke workflow with inputs
        uses: benc-uk/workflow-dispatch@v1
        with:
          workflow: post_test_dispatch.yml
          inputs: '{ "name": "blah blah"}'
